language: python
services:
- docker
python:
- 3.6
env:
  global: RAROG_TEST_DB_PORT=4242
before_install:
- docker run -d --ulimit nofile=262144:262144 -p $RAROG_TEST_DB_PORT:9000 yandex/clickhouse-server
install:
- pip install tox codecov
script:
- tox
after_success:
- codecov
deploy:
  provider: pypi
  user: ikhlestov
  password:
    secure: A2C/lyHDNOlY8v+saNikzXWFj25IBgYEJKm1MC5nxA9r7OF+OH+mvS/09mqIJ8SOg0hP+SCiDxj9X+NbmgltKYioGA2a6QRAcW/nZfjgtACOU1bgD8vA4wrvjjauGvbUmZj2UH0rxrrq0DjZNcuP9wgbK+OR5i5yVozXydMSPAaNOLypYDL62Aq9mEvLpwYti5PsipFmMhpupRUHXmGmJbU2sI9tcf4dq3XyWicS+cOyaZrbfK36l73WOlwt0UUHJnVfNIFzhrMPjsfRZoTqvYHYojMLZQ7Y6aegKRe5C6PB2TFDV9ZEFGB8feEiVfaBHVxdKuOIhm5wg+J03stTPEVDm2iBlFLM5020SB19EA8r7oVhq0k4+Bbz7cGrgAlzF+HBdHj3E5otNGB+4WcKnXtwMEaVqH89o67cVpzXCBCL6AlctzKwB5a0Stf47IOpHAOOVjuCgqXkdBrOcCnfZrwuvFUj942fGex4RVsF6xC8fkW1c2TthTyxh3v1W7OheXWQMJ9gpqR1o1Z1BtHO/J0T6QQ5MlFlg92H8zL6lB6U2tesDfWbPozW2evKH0o7F0G2rupwOVoMlg4yZZRL7qqUDToRQz4hKTamc2J2hyu4o4URaPcrf8Nd8TvLD4ZVnxbhfXFACBmkjrs7ZktXH9IMRj9W53E0Qc1GiBFAdok=
  skip_existing: true
  on:
    tags: true
    all_branches: true
